<mat-card>
  <mat-card-header class="m-b-16">
    <mat-card-title>Edit Profile of {{profile?.name}}</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="reactiveForm" class="form-field-full" (ngSubmit)="onSubmit()"  >
      <div class="row">
        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Name (malayalam)</mat-label>
            <input  matInput placeholder="Name in malayalam" formControlName="name_mal" required>
            @if (reactiveForm.get('name_mal')?.invalid) {
              <mat-error>Please enter name in mal</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Email</mat-label>
            <input matInput placeholder="email address" formControlName="email"  required>
            @if (reactiveForm.get('email')?.invalid) {
              <mat-error>{{getErrorMessage(reactiveForm)}}</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Salutation</mat-label>
            <mat-select formControlName="srismt">
              <mat-option>-- None --</mat-option>
              <mat-option value="sri">Sri</mat-option>
              <mat-option value="smt">Smt</mat-option>
              <mat-option value="kum">Kum</mat-option>
            </mat-select>
            @if (reactiveForm.get('gender')?.invalid) {
              <mat-error>Please select gender</mat-error>
            }
          </mat-form-field>
        </div>

        <!-- <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>City</mat-label>
            <input matInput placeholder="Simple placeholder" formControlName="city">
            @if (reactiveForm.get('city')?.invalid) {
              <mat-error>Please enter city</mat-error>
            }
          </mat-form-field>
        </div> -->


        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Date of birth </mat-label>
            <input readonly [max]="today" matInput [matDatepicker]="picker3" placeholder="Date of birth"
              formControlName="dob" required>
            <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
            <mat-datepicker  #picker3></mat-datepicker>
            @if (reactiveForm.get('dob')?.invalid) {
              <mat-error>Please enter date of birth</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Date of joining KLA </mat-label>
            <input readonly [max]="today" matInput [matDatepicker]="picker2" placeholder="Date of joining KLA"
              formControlName="dateOfJoinInKLA" required>
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
            @if (reactiveForm.get('dateOfJoinInKLA')?.invalid) {
              <mat-error>Please enter date of joining in KLA</mat-error>
            }
          </mat-form-field>
        </div>



        <!-- <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Company</mat-label>
            <input matInput placeholder="Simple placeholder" formControlName="company">
            @if (reactiveForm.get('company')?.invalid) {
              <mat-error>Please enter company</mat-error>
            }
          </mat-form-field>
        </div> -->

        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>Mobile</mat-label>
            <input matInput placeholder="Mobile" type="number" formControlName="mobile"
            required>
            <mat-icon matSuffix>smartphone</mat-icon>
            @if (reactiveForm.get('mobile')?.invalid) {
              <mat-error>Please enter mobile</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-sm-12 col-xl-12">
          <mat-form-field>
            <mat-label>Address</mat-label>
            <textarea matInput placeholder="address" formControlName="address"></textarea>

            @if (reactiveForm.get('address')?.invalid) {
              <mat-error>Please enter address</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>KLA-ID</mat-label>
            <input matInput placeholder="KLA-ID"  formControlName="klaid">
            <mat-icon matSuffix>klaid</mat-icon>
            @if (reactiveForm.get('klaid')?.invalid) {
              <mat-error>Please enter klaid</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-sm-6 col-xl-4">
          <mat-form-field>
            <mat-label>PAN</mat-label>
            <input matInput placeholder="PAN" formControlName="pan">
            @if (reactiveForm.get('pan')?.invalid) {
              <mat-error>Please enter pan</mat-error>
            }
          </mat-form-field>
        </div>




      <div class="col-sm-6 col-xl-4">
        <mat-form-field>
          <mat-label>Date of entry in service</mat-label>

          <input readonly [max]="today" matInput [matDatepicker]="picker4" placeholder="Date of entry in service"
            formControlName="dateOfEntryInService">
          <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
          <mat-datepicker #picker4></mat-datepicker>
          @if (reactiveForm.get('dateOfEntryInService')?.invalid) {
            <mat-error>Please enter date of of entry in service</mat-error>
          }
        </mat-form-field>
      </div>

      <div class="col-sm-6 col-xl-4">
        <mat-form-field>
          <mat-label>Date of commencement of continuous service</mat-label>
          <input readonly [max]="today" matInput [matDatepicker]="picker5"
            formControlName="dateOfCommencementOfContinousService">
          <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
          <mat-datepicker #picker5></mat-datepicker>
          @if (reactiveForm.get('dateOfCommencementOfContinousService')?.invalid) {
            <mat-error>Please enter date of commencement of continuous service</mat-error>
          }
        </mat-form-field>
      </div>

    </div>

      <div class="d-flex justify-content-end">
        <button mat-raised-button color="primary" [loading]="isLoading" [disabled]="!!reactiveForm.invalid && !reactiveForm.touched" >Save</button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
